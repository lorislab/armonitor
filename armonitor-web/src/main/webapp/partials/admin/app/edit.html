<h2>Application
	<small>configuration</small>
</h2>

<ol class="breadcrumb">
	<li>
		<i class="icon-cog-alt"></i> 
		<a href="#/settings">
			Settings
		</a>
	</li>
	<li>
		<i class="icon-beaker"></i>
		<a href="#/settings/app">
			Applications
		</a>		
	</li>	
	<li class="active">
		<i class="icon-beaker"></i><span data-ng-hide="data.n"> {{data.name}}</span><span data-ng-show="data.n"> - - - - - - - - - -</span>
	</li>		
</ol>

<div class="row">
	<div class="col-lg-12">

		<tabset>
			<tab>
				<tab-heading>
					<i class="icon-beaker"></i> Application
				</tab-heading>				
				<form class="form-horizontal" data-ng-submit="save()">
					<fieldset>
						<div class="control-group">
							<label class="control-label" for="auth"></label>
							<div class="controls">
								<label class="enabled">
									<input type="checkbox" id="auth" data-ng-model="data.enabled"> Application enabled
								</label>							
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="name">Name</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="name" type="text" class="form-control" placeholder="Name" data-ng-model="data.name" required>
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="index">Index</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="index" type="number" class="form-control" placeholder="The index of the application" data-ng-model="data.index" required>
							</div>
						</div>
						
						<div class="control-group">
							<label class="control-label" for="tt">Type</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="tt" type="text" class="form-control" placeholder="Type of the application" data-ng-model="data.type">
							</div>
						</div>				

						<div class="control-group">
							<label class="control-label" for="scmTrunk">Source code trunk</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="scmTrunk" type="text" class="form-control" placeholder="Name" data-ng-model="data.scmTrunk">
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="scmBranches">Source code branches</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="scmBranches" type="text" class="form-control" placeholder="Name" data-ng-model="data.scmBranches">
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="scmTags">Source code tags</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="scmTags" type="text" class="form-control" placeholder="Name" data-ng-model="data.scmTags">
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="repoLink">Repository link</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="repoLink" type="text" class="form-control" placeholder="Name" data-ng-model="data.repoLink">
							</div>
						</div>
						
						<h6>
							<span class="label label-info">${server}</span>
							<span class="label label-info">${groupId}</span> 
							<span class="label label-info">${artifactId}</span> 
							<span class="label label-info">${mavenVersion}</span> 
							<span class="label label-info">${scm}</span> 
							<span class="label label-info">${build}</span> 
								dynamic keys.
						</h6>
						
						<div class="control-group">
							<label class="control-label" for="save"></label>
							<div class="controls">
								<button id="save" type="submit" class="btn btn-success" data-ng-hide="data.n" ><i class="icon-floppy"></i> Save</button>
								<button id="save" type="submit" class="btn btn-success" data-ng-show="data.n" ><i class="icon-doc-text"></i> Create</button>
								<button id="close" type="button" class="btn btn-default" data-ng-click="close()" ><i class="icon-floppy"></i> Close</button>
								<span style="float: right">
									<button type="button" class="btn btn-danger" data-ng-disabled="data.n" data-ng-click="delete()"><i class="icon-trash"></i> Delete</button>
								</span>								
							</div>
						</div>					
					</fieldset>
				</form>	
			</tab>
			<tab data-ng-show="!data.n" select="load()" data-ng-controller="AppProjectAdminCtrl">
				<tab-heading>
					<i class="icon-award"></i> Project
				</tab-heading>
				<form class="form-horizontal" data-ng-submit="add()" >		
					<fieldset>

						<div class="control-group">
							<label class="control-label" for="item">Project</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<select id="item" class="form-control" data-ng-model="item.selected" data-ng-options="k as v for (k,v) in list">									
									<option value="">--- select a project ---</option>
								</select>
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="pp"></label>
							<div class="controls">
								<button id="pp" class="btn btn-success" type="submit" ><i class="icon-floppy"></i>  Update</button>
								<button id="close" type="button" class="btn btn-default" data-ng-click="close()" ><i class="icon-floppy"></i> Close</button>
							</div>												
						</div>
					</fieldset>
				</form>			
			</tab>			
			<tab data-ng-show="!data.n" select="load()" data-ng-controller="AppScmAdminCtrl">
				<tab-heading>
					<i class="icon-fork"></i> Source code system
				</tab-heading>
				<form class="form-horizontal" data-ng-submit="addscm()" >		
					<fieldset>

						<div class="control-group">
							<label class="control-label" for="btsc">Source code systems</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<select id="btsc" class="form-control" data-ng-model="bts.selected" data-ng-options="k as v for (k,v) in btslist">									
									<option value="">--- select a source code system ---</option>
								</select>
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="cp"></label>
							<div class="controls">
								<button id="cp" class="btn btn-success" type="submit" ><i class="icon-floppy"></i>  Update</button>
								<button id="close" type="button" class="btn btn-default" data-ng-click="close()" ><i class="icon-floppy"></i> Close</button>
							</div>												
						</div>
					</fieldset>
				</form>			
			</tab>	
			<tab data-ng-show="!data.n" select="load()" data-ng-controller="AppSysAdminCtrl">
				<tab-heading>
					<i class="icon-suitcase"></i> Systems
				</tab-heading>
				<div style="padding-top: 10px"></div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="input-group">
							<input type="search" placeholder="Search" class="form-control" data-ng-model="filter">
							<span class="input-group-btn">
								<button class="btn btn-default" type="button" data-ng-click="clear()"><i class="icon-erase"></i></button>
								<button class="btn btn-default" type="button" data-ng-click="reload()"><i class="icon-arrows-cw"></i></button>
								<a class="btn btn-default" href="#/settings/sys/edit" ><i class="icon-doc-text"></i></a>
							</span>				
						</div>			
					</div>
					<table class="table table-striped sortable">
						<thead>
							<tr>
								<th> </th>	
								<th>Name</th>	
								<th>Enabled</th>
								<th>Service</th>
								<th>Domain</th>
								<th>Classification</th>
								<th>Notification</th>
								<th>Timer</th>
							</tr>
						</thead>			
						<tbody>
							<tr data-ng-repeat="item in all| filter:search">
								<td>
									<a href="#/settings/sys/edit/{{item.guid}}"><span class="icon-pencil"></span></a>
								</td>					
								<td>{{item.name}}</td>
								<td><i data-ng-class="{'icon-check': item.enabled, 'icon-check-empty': !item.enabled}"></i></td>
								<td>{{item.service}}</td>
								<td>{{item.domain}}</td>
								<td>{{item.clazz}}</td>
								<td><i data-ng-class="{'icon-check': item.enabled, 'icon-check-empty': !item.notification}"></i></td>
								<td><i data-ng-class="{'icon-check': item.enabled, 'icon-check-empty': !item.timer}"></i></td>
							</tr>
						</tbody>
					</table>					
				</div>		

				<div class="control-group">
					<label class="control-label" for="cp"></label>
					<div class="controls">
						<button id="close" type="button" class="btn btn-default" data-ng-click="close()" ><i class="icon-floppy"></i> Close</button>
					</div>												
				</div>
			</tab>
			<tab data-ng-show="!data.n">
				<tab-heading>
					<i class="icon-key"></i> Key
				</tab-heading>
				<form class="form-horizontal" >		
					<fieldset>

						<div class="control-group">
							<label class="control-label" for="key">Key</label>
							<div class="input-group">
								<span class="input-group-addon"><i class="icon-pencil"></i></span>
								<input id="key" type="text" class="form-control" placeholder="Application key" data-ng-model="data.key" readonly="true">
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="gkey"></label>
							<div class="controls">
								<button id="gkey" class="btn btn-success" type="button" data-ng-click="generateKey()"><i class="icon-floppy"></i>  Generate key</button>
								<button id="close" type="button" class="btn btn-default" data-ng-click="close()" ><i class="icon-floppy"></i> Close</button>
								<span style="float: right">
									<button type="button" class="btn btn-danger" data-ng-disabled="data.n" data-ng-click="deleteKey()"><i class="icon-trash"></i> Remove key</button>
								</span>									
							</div>												
						</div>
					</fieldset>
				</form>	
			</tab>			
		</tabset>
	</div>
</div>	
